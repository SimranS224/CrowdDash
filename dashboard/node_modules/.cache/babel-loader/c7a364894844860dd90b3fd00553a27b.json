{"ast":null,"code":"var _jsxFileName = \"/home/jason/projects/InsureCam/dashboard/src/Components/ViolationHistory/index.jsx\";\nimport React, { Component } from 'react';\nimport { Table } from 'react-bootstrap';\nimport \"./history.css\";\nconst violationString = {\n  \"red-light\": \"Ran Red Light\",\n  \"collision\": \"Collision\"\n};\nexport class History extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      await this.updateMarkers();\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.toDateString = date => {\n      const d = new Date(date * 1000);\n      return d.getDate() + \"/\" + d.getMonth() + \"/\" + d.getFullYear();\n    };\n\n    this.updateMarkers = async () => {\n      const violations = Object.values(this.props.selection.violations);\n      console.log(\"viols\", violations);\n      this.setState({\n        violations: violations,\n        isLoading: false\n      });\n    };\n\n    this.componentDidUpdate = async prevState => {\n      // console.log(\"prevProps\", prevProps.selection, \"curr\", this.props.selection)\n      if (!prevState.selection || prevState.selection !== this.props.selection) {\n        this.updateMarkers();\n      }\n    };\n\n    this.handleMarkerClick = violation => {\n      if (violation.violationID && violation.evidence.length > 0) {\n        window.location.href = \"/violation/\".concat(this.props.selection.licensePlate, \"/\").concat(violation.violationID);\n      } else {\n        console.log(\"violation\", violation.location);\n      }\n    };\n\n    this.render = () => {\n      if (this.state.isLoading) return React.createElement(\"div\", {\n        className: \"cardLoading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Loading...\");\n      return React.createElement(Table, {\n        responsive: true,\n        id: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"headerRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"tableheader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        className: \"tableheader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Violation Type\"), React.createElement(\"th\", {\n        className: \"tableheader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"Date\"), React.createElement(\"th\", {\n        className: \"tableheader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Confidence of Occurence\"))), React.createElement(\"tbody\", {\n        className: \"tableBody\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, this.state.violations.map((violation, i) => {\n        return React.createElement(\"tr\", {\n          key: i,\n          className: \"linkToViolation\",\n          onClick: () => this.handleMarkerClick(violation),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          className: \"tabletext\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, i + 1), React.createElement(\"td\", {\n          className: \"tabletext\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, violationString[violation.type]), React.createElement(\"td\", {\n          className: \"tabletext\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, this.toDateString(violation.timestamp)), React.createElement(\"td\", {\n          className: \"tabletext\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, violation.probability, \"%\"));\n      })));\n    };\n\n    this.state = {\n      lat: 47.444,\n      lng: -122.176,\n      isLoading: true,\n      selection: undefined,\n      stores: []\n    };\n  }\n\n}\nexport default History;","map":{"version":3,"sources":["/home/jason/projects/InsureCam/dashboard/src/Components/ViolationHistory/index.jsx"],"names":["React","Component","Table","violationString","History","constructor","props","componentDidMount","updateMarkers","setState","isLoading","toDateString","date","d","Date","getDate","getMonth","getFullYear","violations","Object","values","selection","console","log","componentDidUpdate","prevState","handleMarkerClick","violation","violationID","evidence","length","window","location","href","licensePlate","render","state","map","i","type","timestamp","probability","lat","lng","undefined","stores"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Table } from 'react-bootstrap';\n\nimport \"./history.css\";\n\nconst violationString = {\n    \"red-light\": \"Ran Red Light\",\n    \"collision\": \"Collision\"\n}\n\nexport class History extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            lat: 47.444,\n            lng: -122.176,\n            isLoading: true,\n            selection: undefined,\n            stores: [],\n        }\n    }\n\n    componentDidMount = async () => {\n        await this.updateMarkers()\n        this.setState({ isLoading: false })\n    }\n\n    toDateString = (date) => {\n        const d = new Date(date * 1000)\n        return d.getDate() + \"/\" + d.getMonth() + \"/\" + d.getFullYear();\n    }\n\n    updateMarkers = async () => {\n        const violations = Object.values(this.props.selection.violations)\n        console.log(\"viols\", violations)\n        this.setState({ violations: violations, isLoading: false })\n    }\n\n    componentDidUpdate = async (prevState) => {\n        // console.log(\"prevProps\", prevProps.selection, \"curr\", this.props.selection)\n        if (!prevState.selection || prevState.selection !== this.props.selection) {\n            this.updateMarkers()\n        }\n    }\n\n    handleMarkerClick = (violation) => {\n        if (violation.violationID && violation.evidence.length > 0) {\n            window.location.href = `/violation/${this.props.selection.licensePlate}/${violation.violationID}`\n        } else {\n            console.log(\"violation\", violation.location)\n        }\n    }\n\n    render = () => {\n        if (this.state.isLoading) return <div className=\"cardLoading\">Loading...</div>\n        return (\n            <Table responsive id=\"table\">\n                <thead className=\"headerRow\">\n                    <tr>\n                        <th className=\"tableheader\">#</th>\n                        <th className=\"tableheader\">Violation Type</th>\n                        <th className=\"tableheader\">Date</th>\n                        <th className=\"tableheader\">Confidence of Occurence</th>\n                    </tr>\n                </thead>\n                <tbody className=\"tableBody\">\n                    {this.state.violations.map((violation, i) => {\n                        return (\n                            <tr key={i} className=\"linkToViolation\" onClick={() => this.handleMarkerClick(violation)}>\n                                <td className=\"tabletext\">{i + 1}</td>\n                                <td className=\"tabletext\">{violationString[violation.type]}</td>\n                                <td className=\"tabletext\">{this.toDateString(violation.timestamp)}</td>\n                                <td className=\"tabletext\">{violation.probability}%</td>\n                            </tr>\n                        )\n                    })}\n                </tbody>\n            </Table>\n        );\n    }\n}\n\nexport default History;"]},"metadata":{},"sourceType":"module"}